<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>工资查询提现一体化系统</title>
    <style>
        /* 以下样式完全沿用你原版的，一点没动，方便你直接覆盖 */
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;background:linear-gradient(135deg,#0f2027 0%,#203a43 50%,#2c5364 100%);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;overflow-x:hidden}
        .container{background:rgba(255,255,255,.08);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-radius:20px;border:1px solid rgba(255,255,255,.18);box-shadow:0 20px 40px rgba(0,0,0,.3),0 0 0 1px rgba(255,255,255,.1);padding:40px;max-width:600px;width:100%;animation:fadeIn .5s ease-out}
        @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        .header{text-align:center;margin-bottom:30px}.header h1{color:#fff;font-size:28px;margin-bottom:10px;text-shadow:0 0 10px rgba(255,255,255,.5)}
        .search-section{margin-bottom:30px}.search-input{width:100%;padding:15px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:10px;font-size:16px;text-align:center;transition:all .3s ease;color:white;margin-bottom:15px}
        .search-input:focus{outline:none;border-color:rgba(255,107,53,.5);box-shadow:0 0 10px rgba(255,107,53,.3);background:rgba(255,255,255,.15)}
        .search-input::placeholder{color:rgba(255,255,255,.5)}
        .search-btn{width:100%;padding:15px;background:linear-gradient(135deg,#4CAF50 0%,#66BB6A 100%);color:white;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 5px 15px rgba(76,175,80,.3)}
        .search-btn:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(76,175,80,.4)}
        .info-card{background:rgba(255,255,255,.1);backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);border-radius:15px;padding:20px;margin-bottom:30px;border:1px solid rgba(255,255,255,.15);box-shadow:0 10px 20px rgba(0,0,0,.1);transition:transform .3s ease;display:none}
        .info-card.show{display:block;animation:slideIn .3s ease-out}
        @keyframes slideIn{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
        .info-item{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid rgba(255,255,255,.1)}.info-item:last-child{border-bottom:none}
        .info-label{color:rgba(255,255,255,.7);font-weight:500;font-size:14px}
        .info-value{color:#fff;font-weight:600;font-size:16px;word-break:break-all;transition:all .3s ease}
        .rolling-number{display:inline-block;position:relative;overflow:hidden;height:1.2em}
        .rolling-number span{display:inline-block;transform:translateY(1.2em);animation:rollIn .5s ease-out forwards}
        @keyframes rollIn{to{transform:translateY(0)}}
        .color-black{color:#000!important;text-shadow:0 0 5px rgba(0,0,0,.5)}
        .color-gray{color:gray!important;text-shadow:0 0 5px rgba(128,128,128,.5)}
        .color-white{color:#fff!important;text-shadow:0 0 5px rgba(255,255,255,.5)}
        .color-green{color:#0f0!important;text-shadow:0 0 5px rgba(0,255,0,.5)}
        .color-blue{color:#08f!important;text-shadow:0 0 5px rgba(0,128,255,.5)}
        .color-purple{color:#80f!important;text-shadow:0 0 5px rgba(128,0,255,.5)}
        .color-gold{color:#fd0!important;text-shadow:0 0 5px rgba(255,215,0,.5)}
        .color-orange{color:#f80!important;text-shadow:0 0 5px rgba(255,128,0,.5)}
        .color-red{color:red!important;text-shadow:0 0 5px rgba(255,0,0,.5)}
        .salary-rolling{display:inline-block;position:relative;overflow:hidden;height:1.2em}
        .salary-digit{display:inline-block;transform:rotateX(90deg);animation:rotateIn .8s ease-out forwards;transform-style:preserve-3d}
        @keyframes rotateIn{0%{transform:rotateX(90deg);opacity:0}50%{opacity:.5}100%{transform:rotateX(0deg);opacity:1}}
        .salary-symbol{display:inline-block;animation:symbolPulse 2s infinite}
        @keyframes symbolPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
        .glitch-text{font-family:'Courier New',monospace;letter-spacing:2px;position:relative}
        .glitch-text::before{content:attr(data-text);position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(255,255,255,.1);color:rgba(255,255,255,.8);animation:glitch 2s infinite}
        @keyframes glitch{0%,100%{opacity:1}50%{opacity:.5}}
        .question-mark{display:inline-block;font-size:24px;color:#ff6b35;animation:rotateAndScale 2s ease-out forwards}
        @keyframes rotateAndScale{0%{transform:rotate(0deg) scale(1)}50%{transform:rotate(360deg) scale(2)}100%{transform:rotate(720deg) scale(1)}}
        .payment-selector{margin-bottom:30px;display:none}.payment-selector.show{display:block;animation:slideIn .3s ease-out}
        .payment-title{color:#fff;font-size:20px;margin-bottom:20px;text-align:center;text-shadow:0 0 5px rgba(255,255,255,.3)}
        .payment-cards{display:flex;gap:15px;overflow-x:auto;padding:10px 0;-webkit-overflow-scrolling:touch}
        .payment-card{min-width:100px;background:rgba(255,255,255,.1);backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);border-radius:12px;padding:15px;text-align:center;cursor:pointer;transition:all .3s ease;border:1px solid rgba(255,255,255,.1);position:relative;overflow:hidden;flex:1}
        .payment-card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(0,0,0,.2);background:rgba(255,255,255,.15)}
        .payment-card.selected{border:1px solid rgba(255,107,53,.5);background:rgba(255,107,53,.15);box-shadow:0 0 15px rgba(255,107,53,.3)}
        .payment-card.selected::after{content:'✓';position:absolute;top:5px;right:5px;background:#ff6b35;color:white;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px}
        .payment-icon{font-size:30px;margin-bottom:8px;filter:drop-shadow(0 0 5px rgba(255,255,255,.5))}
        .payment-name{color:#fff;font-size:12px;font-weight:500}
        .amount-section{margin-bottom:30px;display:none}.amount-section.show{display:block;animation:slideIn .3s ease-out}
        .amount-input{width:100%;padding:15px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:10px;font-size:16px;text-align:center;transition:all .3s ease;color:white;-webkit-appearance:none}
        .amount-input:focus{outline:none;border-color:rgba(255,107,53,.5);box-shadow:0 0 10px rgba(255,107,53,.3);background:rgba(255,255,255,.15)}
        .amount-input::placeholder{color:rgba(255,255,255,.5)}
        .account-section{margin-bottom:30px;display:none}.account-section.show{display:block;animation:slideIn .3s ease-out}
        .account-input{width:100%;padding:15px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:10px;font-size:16px;text-align:center;transition:all .3s ease;color:white;margin-bottom:15px}
        .account-input:focus{outline:none;border-color:rgba(255,107,53,.5);box-shadow:0 0 10px rgba(255,107,53,.3);background:rgba(255,255,255,.15)}
        .account-input::placeholder{color:rgba(255,255,255,.5)}
        .submit-btn{width:100%;padding:15px;background:linear-gradient(135deg,#ff6b35 0%,#ff9a3d 100%);color:white;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 5px 15px rgba(255,107,53,.3);position:relative;overflow:hidden;-webkit-tap-highlight-color:transparent;display:none}
        .submit-btn.show{display:block;animation:slideIn .3s ease-out}
        .submit-btn:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(255,107,53,.4)}
        .submit-btn:active{transform:translateY(0)}
        .submit-btn::after{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:rgba(255,255,255,.1);transform:rotate(30deg);transition:all .6s ease}
        .submit-btn:hover::after{transform:rotate(30deg) translate(20%,20%)}
        .loading{display:none;text-align:center;padding:20px}
        .loading-spinner{border:3px solid rgba(255,255,255,.1);border-top:3px solid #ff6b35;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:0 auto}
        @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
        .loading p{color:rgba(255,255,255,.7);margin-top:10px}
        .alert{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.7);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);color:white;padding:30px;border-radius:15px;box-shadow:0 20px 40px rgba(0,0,0,.3),0 0 0 1px rgba(255,255,255,.1);z-index:1000;display:none;max-width:90%;width:400px;text-align:center;border:1px solid rgba(255,255,255,.1)}
        .alert.show{display:block;animation:alertShow .3s ease-out}
        @keyframes alertShow{from{opacity:0;transform:translate(-50%,-50%) scale(.8)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}
        .alert h3{margin-bottom:15px;color:#ff6b35;text-shadow:0 0 5px rgba(255,107,53,.3)}
        .alert p{margin-bottom:20px;line-height:1.6;font-size:14px}
        .alert-btn{background:linear-gradient(135deg,#ff6b35 0%,#ff9a3d 100%);color:white;border:none;padding:10px 30px;border-radius:5px;cursor:pointer;font-size:16px;transition:all .3s ease;box-shadow:0 5px 15px rgba(255,107,53,.3)}
        .alert-btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(255,107,53,.4)}
        .overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:999;display:none;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px)}
        .overlay.show{display:block}
        .countdown{font-size:20px;font-weight:bold;color:#ff6b35;margin:20px 0;text-shadow:0 0 5px rgba(255,107,53,.3)}
        .not-found{color:#ff6b35;text-align:center;padding:20px;display:none}.not-found.show{display:block}
        @media (max-width:768px){.container{padding:20px;margin:10px}.header h1{font-size:24px}.payment-cards{justify-content:flex-start;gap:10px}.payment-card{min-width:80px;padding:12px}.payment-icon{font-size:24px}.payment-name{font-size:11px}.info-item{flex-direction:column;align-items:flex-start;gap:5px}.info-value{font-size:14px}.search-input,.amount-input,.account-input{font-size:16px}.submit-btn,.search-btn{font-size:16px}.alert{padding:20px;width:90%}.alert p{font-size:14px}}
        @media (max-width:480px){.container{padding:15px;margin:5px}.header h1{font-size:20px}.info-card{padding:15px}.payment-title{font-size:18px}.payment-card{min-width:70px;padding:10px}.payment-icon{font-size:20px}.payment-name{font-size:10px}.search-input,.amount-input,.account-input{font-size:14px;padding:12px}.submit-btn,.search-btn{font-size:14px;padding:12px}.alert{padding:15px}.countdown{font-size:18px}}
        @media (max-width:320px){.payment-cards{gap:8px}.payment-card{min-width:60px;padding:8px}.payment-icon{font-size:18px}.payment-name{font-size:9px}.search-input,.amount-input,.account-input{font-size:12px}.submit-btn,.search-btn{font-size:12px}}
        @media (max-height:500px) and (orientation:landscape){.container{padding:15px;max-height:90vh;overflow-y:auto}.header{margin-bottom:20px}.header h1{font-size:20px}.info-card{margin-bottom:20px;padding:15px}.payment-selector{margin-bottom:20px}.payment-title{font-size:18px;margin-bottom:15px}.amount-section{margin-bottom:20px}.account-section{margin-bottom:20px}}
        @media (-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi){.payment-card{border-width:.5px}.info-card{border-width:.5px}.search-input,.amount-input,.account-input{border-width:.5px}}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>漳州东神工作室网络科技有限公司</h1>
            <h1>工资查询网</h1>
        </div>

        <div class="search-section">
            <input type="text" class="search-input" id="idInput" placeholder="🆔 请输入18位身份证号 🆔" maxlength="18">
            <button class="search-btn" id="searchBtn">🔎查询 | 启动🔍</button>
        </div>

        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>🌐正在查询数据中•••</p>
        </div>

        <div class="not-found" id="notFound">
            <p>❌ 未找到该身份证对应的员工信息/无读取到数据库 ❗️</p>
        </div>

        <div class="info-card" id="infoCard">
            <div class="info-item">
                <span class="info-label">🏷伪身份证号🏷</span>
                <span class="info-value" id="idNumber">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">🔖姓名🔖</span>
                <span class="info-value" id="name">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">👥性别👥</span>
                <span class="info-value" id="gender">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">💳储存号💳</span>
                <span class="info-value" id="storageNumber">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">💴工资💴</span>
                <span class="info-value" id="salary">-</span>
            </div>
        </div>

        <div class="payment-selector" id="paymentSelector">
            <h2 class="payment-title">👆🏻请选择工资到账通道👇🏻</h2>
            <div class="payment-cards" id="paymentCards">
                <div class="payment-card" data-type="QQ">
                    <div class="payment-icon">🐧</div>
                    <div class="payment-name">QQ</div>
                </div>
                <div class="payment-card" data-type="微信">
                    <div class="payment-icon">✅</div>
                    <div class="payment-name">微信</div>
                </div>
                <div class="payment-card" data-type="支付宝">
                    <div class="payment-icon">🟦</div>
                    <div class="payment-name">支付宝</div>
                </div>
                <div class="payment-card" data-type="银行卡">
                    <div class="payment-icon">💳</div>
                    <div class="payment-name">银行卡</div>
                </div>
                <div class="payment-card" data-type="手机话费">
                    <div class="payment-icon">📶</div>
                    <div class="payment-name">手机话费</div>
                </div>
            </div>
        </div>

        <div class="amount-section" id="amountSection">
            <input type="number" class="amount-input" id="amountInput" placeholder="⌨️请输入需要工资提现的金额💴" min="0" step="0.01">
        </div>

        <div class="account-section" id="accountSection">
            <input type="text" class="account-input" id="qqAccountInput" placeholder="🐧🆔 请输入QQ号 (最多13位数字)" style="display: none;">
            <input type="text" class="account-input" id="wechatAccountInput" placeholder="✅🆔 请输入微信号 (字母和数字)" style="display: none;">
            <input type="text" class="account-input" id="alipayAccountInput" placeholder="🟦🆔 请输入支付宝账号 (11位手机号)" style="display: none;">
            <input type="text" class="account-input" id="bankAccountInput" placeholder="💳🆔 请输入银行卡号 (最多19位数字)" style="display: none;">
            <input type="text" class="account-input" id="phoneAccountInput" placeholder="📱🆔 请输入手机号 (11位数字)" style="display: none;">
        </div>

        <button class="submit-btn" id="submitBtn">🈸确认提现🈸</button>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="alert" id="alert">
        <h3>⚠️提示⚠️</h3>
        <p id="alertMessage"></p>
        <div class="countdown" id="countdown"></div>
        <button class="alert-btn" id="alertBtn">💹确定💹</button>
    </div>

    <script>
        /* ===== 1. 开发者工具检测（保留） ===== */
        (function () {
            const devtools = { open: false, orientation: undefined };
            const threshold = 160;
            setInterval(function () {
                if (window.outerHeight - window.innerHeight > threshold ||
                    window.outerWidth - window.innerWidth > threshold) {
                    if (!devtools.open) {
                        devtools.open = true;
                        window.location.href = 'https://dongshengamestudio.github.io/error30081690014443201/';
                    }
                } else {
                    devtools.open = false;
                }
            }, 500);

            document.onkeydown = function (e) {
                if (e.keyCode === 123 ||
                    (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) ||
                    (e.ctrlKey && e.keyCode === 85)) {
                    e.preventDefault();
                    window.location.href = 'https://dongshengamestudio.github.io/error30081690014443201/';
                }
            };
        })();

        /* ===== 2. 原来“电脑端跳转”代码已彻底删除 =====
           移动端/PC 端都能正常停留本页，不再被强制跳转
        =========================================== */

        /* ===================== 以下所有业务代码均保持原样 ===================== */
        class SalarySystem {
            constructor() {
                this.allData = [];
                this.currentData = null;
                this.selectedPayment = null;
                this.phoneNumber = '18150148372';
                this.init();
            }
            init() {
                this.bindEvents();
                this.handleResize();
                this.loadAllData();
            }
            bindEvents() {
                document.getElementById('searchBtn').addEventListener('click', () => this.searchById());
                document.getElementById('idInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.searchById();
                });
                document.querySelectorAll('.payment-card').forEach(card => {
                    card.addEventListener('click', () => {
                        document.querySelectorAll('.payment-card').forEach(c => c.classList.remove('selected'));
                        card.classList.add('selected');
                        this.selectedPayment = card.dataset.type;
                        this.showAmountSection();
                        this.showAccountInput();
                    });
                });
                document.getElementById('submitBtn').addEventListener('click', () => this.handleSubmit());
                document.getElementById('alertBtn').addEventListener('click', () => this.hideAlert());

                const amountInput = document.getElementById('amountInput');
                amountInput.addEventListener('input', (e) => {
                    const val = parseFloat(e.target.value);
                    if (val < 0) e.target.value = 0;
                    if (this.currentData && val > this.currentData.salary) e.target.value = this.currentData.salary;
                });
                const idInput = document.getElementById('idInput');
                idInput.addEventListener('input', (e) => {
                    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 18);
                });
                this.setupAccountInputRestrictions();
            }
            setupAccountInputRestrictions() {
                const qq = document.getElementById('qqAccountInput');
                qq.addEventListener('input', (e) => {
                    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 13);
                });
                const wx = document.getElementById('wechatAccountInput');
                wx.addEventListener('input', (e) => {
                    e.target.value = e.target.value.replace(/[^a-zA-Z0-9]/g, '');
                });
                const ali = document.getElementById('alipayAccountInput');
                ali.addEventListener('input', (e) => {
                    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 11);
                });
                const bank = document.getElementById('bankAccountInput');
                bank.addEventListener('input', (e) => {
                    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 19);
                });
                const phone = document.getElementById('phoneAccountInput');
                phone.addEventListener('input', (e) => {
                    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 11);
                });
            }
            handleResize() {
                const w = window.innerWidth;
                const pc = document.querySelector('.payment-cards');
                pc.style.flexWrap = w <= 320 ? 'wrap' : 'nowrap';
                const root = document.documentElement;
                if (w <= 480) root.style.fontSize = '14px';
                else if (w <= 768) root.style.fontSize = '15px';
                else root.style.fontSize = '16px';
            }
            async loadAllData() {
                try {
                    const d1 = await this.loadScript('Gz1.js');
                    if (d1) this.allData = this.allData.concat(this.parseData(d1));
                } catch (e) { console.log('Gz1.js not found'); }
                try {
                    const d2 = await this.loadScript('Gz2.js');
                    if (d2) this.allData = this.allData.concat(this.parseData(d2));
                } catch (e) { console.log('Gz2.js not found'); }
                if (this.allData.length === 0) this.showAlert('ℹ️系统未检测到数据库，请稍后重试或联系[东神团队/云计算平台]后尝试。ℹ️', false);
            }
            loadScript(fn) {
                return new Promise((res, rej) => {
                    const s = document.createElement('script');
                    s.src = fn + '?t=' + Date.now();
                    s.onload = () => { const d = window.salaryData; delete window.salaryData; document.head.removeChild(s); res(d); };
                    s.onerror = () => { document.head.removeChild(s); rej(new Error('not found')); };
                    document.head.appendChild(s);
                    setTimeout(() => rej(new Error('timeout')), 2000);
                });
            }
            parseData(data) {
                const lines = data.trim().split('\n');
                const res = [];
                lines.forEach(l => {
                    if (!l.trim()) return;
                    const id = l.substring(0, 18);
                    const nameMatch = l.substring(18).match(/^[\u4e00-\u9fa5]{2,3}/);
                    const name = nameMatch ? nameMatch[0] : '';
                    const genderChar = l.substring(18 + name.length, 18 + name.length + 1);
                    const gender = genderChar === 'R' ? '女' : '男';
                    const rem = l.substring(18 + name.length + 1);
                    const storage = rem.substring(0, 15);
                    const salary = parseFloat(rem.substring(15));
                    if (id && name && gender && storage && !isNaN(salary)) res.push({ idNumber: id, name, gender, storageNumber: storage, salary });
                });
                return res;
            }
            searchById() {
                const v = document.getElementById('idInput').value.trim();
                if (!v) return this.showAlert('请输入伪身份证号');
                if (v.length !== 18) return this.showAlert('伪身份证号必须为18位');
                this.showLoading(true);
                setTimeout(() => {
                    const f = this.allData.find(it => it.idNumber === v);
                    this.showLoading(false);
                    if (f) {
                        this.currentData = f;
                        this.displayData(f);
                        this.showPaymentSelector();
                        this.hideNotFound();
                    } else {
                        this.hideData();
                        this.showNotFound();
                    }
                }, 1000);
            }
            showLoading(f) { document.getElementById('loading').style.display = f ? 'block' : 'none'; }
            displayData(d) {
                this.animateText('idNumber', d.idNumber, 'glitch');
                this.animateText('name', d.name, 'question');
                this.animateText('gender', d.gender, 'question');
                this.animateText('storageNumber', d.storageNumber, 'glitch');
                this.animateSalary('salary', d.salary);
                document.getElementById('infoCard').classList.add('show');
                const am = document.getElementById('amountInput');
                am.max = d.salary;
                am.placeholder = `最大可提现金额：¥${d.salary.toFixed(2)}`;
            }
            animateText(elId, txt, tp) {
                const el = document.getElementById(elId);
                if (tp === 'glitch') {
                    el.classList.add('glitch-text');
                    el.setAttribute('data-text', txt);
                    let idx = 0;
                    const intr = setInterval(() => {
                        if (idx <= txt.length) {
                            el.textContent = txt.substring(0, idx) + this.generateGlitch(txt.length - idx);
                            idx++;
                        } else { clearInterval(intr); el.textContent = txt; }
                    }, 100);
                } else if (tp === 'question') {
                    el.innerHTML = '<span class="question-mark">?</span>';
                    setTimeout(() => { el.textContent = txt; el.classList.add('rolling-number'); el.innerHTML = `<span>${txt}</span>`; }, 2000);
                }
            }
            animateSalary(elId, val) {
                const el = document.getElementById(elId);
                const cls = this.getColorBySalary(val);
                const str = '¥' + val.toFixed(2);
                el.innerHTML = '';
                const sym = document.createElement('span');
                sym.textContent = '¥'; sym.className = 'salary-symbol ' + cls; el.appendChild(sym);
                for (let i = 0; i < str.length - 1; i++) {
                    const sp = document.createElement('span');
                    sp.textContent = str[i + 1]; sp.className = 'salary-digit ' + cls; sp.style.animationDelay = (i * 0.1) + 's'; el.appendChild(sp);
                }
                el.classList.add('salary-rolling');
            }
            generateGlitch(len) {
                const chars = '73921846503719284605739182460537192846';
                let r = '';
                for (let i = 0; i < len; i++) r += chars[Math.floor(Math.random() * chars.length)];
                return r;
            }
            getColorBySalary(s) {
                if (s < 1) return 'color-black';
                if (s < 10) return 'color-gray';
                if (s < 20) return 'color-white';
                if (s < 50) return 'color-green';
                if (s < 200) return 'color-blue';
                if (s < 800) return 'color-purple';
                if (s < 1200) return 'color-gold';
                if (s < 7000) return 'color-orange';
                return 'color-red';
            }
            showPaymentSelector() { document.getElementById('paymentSelector').classList.add('show'); }
            showAmountSection() { document.getElementById('amountSection').classList.add('show'); document.getElementById('submitBtn').classList.add('show'); }
            showAccountInput() {
                document.getElementById('accountSection').classList.add('show');
                document.querySelectorAll('.account-input').forEach(i => i.style.display = 'none');
                switch (this.selectedPayment) {
                    case 'QQ': document.getElementById('qqAccountInput').style.display = 'block'; break;
                    case '微信': document.getElementById('wechatAccountInput').style.display = 'block'; break;
                    case '支付宝': document.getElementById('alipayAccountInput').style.display = 'block'; break;
                    case '银行卡': document.getElementById('bankAccountInput').style.display = 'block'; break;
                    case '手机话费': document.getElementById('phoneAccountInput').style.display = 'block'; break;
                }
            }
            hideData() {
                document.getElementById('infoCard').classList.remove('show');
                document.getElementById('paymentSelector').classList.remove('show');
                document.getElementById('amountSection').classList.remove('show');
                document.getElementById('accountSection').classList.remove('show');
                document.getElementById('submitBtn').classList.remove('show');
                document.getElementById('amountInput').value = '';
                document.querySelectorAll('.account-input').forEach(i => { i.value = ''; i.style.display = 'none'; });
                this.selectedPayment = null;
                document.querySelectorAll('.payment-card').forEach(c => c.classList.remove('selected'));
            }
            showNotFound() { document.getElementById('notFound').classList.add('show'); }
            hideNotFound() { document.getElementById('notFound').classList.remove('show'); }
            handleSubmit() {
                if (!this.currentData) return this.showAlert('请先查询员工信息');
                if (!this.selectedPayment) return this.showAlert('请选择工资到账通道');
                const amt = parseFloat(document.getElementById('amountInput').value);
                if (!amt || amt <= 0) return this.showAlert('请输入有效的到账金额');
                if (amt > this.currentData.salary) return this.showAlert('提现金额不能超过工资总额');
                const acc = this.getAccountInfo();
                if (!acc.isValid) return this.showAlert(acc.message);
                this.showCountdownAlert('ℹ️请确认信息无误，13秒后将自动跳转到相应应用，您需手动点击发送🈸', 13);
                setTimeout(() => this.redirectToApp(amt, acc.account), 13000);
            }
            getAccountInfo() {
                let acc = '', ok = true, msg = '';
                switch (this.selectedPayment) {
                    case 'QQ':
                        acc = document.getElementById('qqAccountInput').value;
                        if (!acc) { ok = false; msg = '请输入QQ号'; }
                        else if (acc.length < 5 || acc.length > 13) { ok = false; msg = 'QQ号长度应为5-13位'; }
                        break;
                    case '微信':
                        acc = document.getElementById('wechatAccountInput').value;
                        if (!acc) { ok = false; msg = '请输入微信号'; }
                        else if (acc.length < 6) { ok = false; msg = '微信号长度至少6位'; }
                        break;
                    case '支付宝':
                        acc = document.getElementById('alipayAccountInput').value;
                        if (!acc) { ok = false; msg = '请输入支付宝账号'; }
                        else if (acc.length !== 11) { ok = false; msg = '支付宝账号必须为11位手机号'; }
                        break;
                    case '银行卡':
                        acc = document.getElementById('bankAccountInput').value;
                        if (!acc) { ok = false; msg = '请输入银行卡号'; }
                        else if (acc.length < 16 || acc.length > 19) { ok = false; msg = '银行卡号长度应为16-19位'; }
                        break;
                    case '手机话费':
                        acc = document.getElementById('phoneAccountInput').value;
                        if (!acc) { ok = false; msg = '请输入手机号'; }
                        else if (acc.length !== 11) { ok = false; msg = '手机号必须为11位'; }
                        break;
                }
                return { isValid: ok, message: msg, account: acc };
            }
            redirectToApp(amt, acc) {
                const { idNumber, name, gender, storageNumber } = this.currentData;
                const sub = `工资提现申请 - ${name}`;
                const body = `
员工信息：
伪身份证号：${idNumber}
姓名：${name}
性别：${gender}
储存号：${storageNumber}
提现金额：¥${amt.toFixed(2)}
到账方式：${this.selectedPayment}
${this.selectedPayment}账号：${acc}
                `.trim();
                const mailApps = ['QQ', '微信', '支付宝'];
                const smsApps = ['银行卡', '手机话费'];
                if (mailApps.includes(this.selectedPayment)) {
                    window.location.href = `mailto:dongshengamestudio@qq.com?subject=${encodeURIComponent(sub)}&body=${encodeURIComponent(body)}`;
                } else if (smsApps.includes(this.selectedPayment)) {
                    window.location.href = `sms:${this.phoneNumber}?body=${encodeURIComponent(body)}`;
                }
            }
            showAlert(msg, hasCountdown = false) {
                document.getElementById('alertMessage').textContent = msg;
                document.getElementById('countdown').style.display = hasCountdown ? 'block' : 'none';
                document.getElementById('overlay').classList.add('show');
                document.getElementById('alert').classList.add('show');
                document.body.style.overflow = 'hidden';
            }
            showCountdownAlert(msg, sec) {
                let c = sec;
                this.showAlert(msg, true);
                document.getElementById('countdown').textContent = c;
                const intr = setInterval(() => {
                    c--;
                    document.getElementById('countdown').textContent = c;
                    if (c <= 0) { clearInterval(intr); this.hideAlert(); }
                }, 1000);
            }
            hideAlert() {
                document.getElementById('overlay').classList.remove('show');
                document.getElementById('alert').classList.remove('show');
                document.body.style.overflow = '';
            }
        }

        // 启动
        new SalarySystem();
    </script>
</body>
</html>